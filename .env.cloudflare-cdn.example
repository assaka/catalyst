# Cloudflare CDN Configuration (FREE PLAN COMPATIBLE!)
# Copy these variables to your .env file and configure with your Cloudflare settings

# ============================================
# BASIC CDN SETTINGS (FREE PLAN)
# ============================================
# Enable/disable Cloudflare CDN (true/false)
ENABLE_CLOUDFLARE_CDN=true
# Your CDN domain (the domain you've added to Cloudflare)
CLOUDFLARE_CDN_DOMAIN=your-domain.com

# ============================================
# CLOUDFLARE API CREDENTIALS (OPTIONAL)
# ============================================
# Only needed for advanced features like cache purging and image resizing
# Zone ID for your domain (found in Cloudflare dashboard overview)
CLOUDFLARE_ZONE_ID=your_zone_id_here
# API Token with Zone:Read and Zone Settings:Edit permissions
CLOUDFLARE_API_TOKEN=your_api_token_here

# ============================================
# OAUTH INTEGRATION (RECOMMENDED)
# ============================================
# OAuth is easier and more secure than API tokens
# Create a Cloudflare App to get these credentials
CLOUDFLARE_OAUTH_CLIENT_ID=your_oauth_client_id
CLOUDFLARE_OAUTH_CLIENT_SECRET=your_oauth_client_secret
CLOUDFLARE_OAUTH_REDIRECT_URI=https://your-domain.com/api/cloudflare/oauth/callback

# ============================================
# SETUP INSTRUCTIONS
# ============================================
# 
# METHOD 1: BASIC SETUP (FREE, MINIMAL FEATURES)
# 1. Add your domain to Cloudflare (free plan)
# 2. Point your DNS to Cloudflare
# 3. Set CLOUDFLARE_CDN_DOMAIN to your domain
# 4. Images will be served through Cloudflare's global CDN
# 5. No additional costs or API setup required
#
# METHOD 2: ENHANCED SETUP (FREE + OAUTH)
# 1. Complete basic setup above
# 2. Create a Cloudflare App:
#    - Go to https://dash.cloudflare.com/profile/api-tokens
#    - Click "Create Token" > "Custom token"
#    - Or use OAuth Apps section
# 3. Set OAuth credentials above
# 4. Use the admin interface to connect your Cloudflare account
# 5. Enables cache purging, zone management, and image resizing (if on Pro+ plan)
#
# METHOD 3: API TOKEN SETUP (ALTERNATIVE TO OAUTH)
# 1. Go to https://dash.cloudflare.com/profile/api-tokens
# 2. Create token with permissions:
#    - Zone:Zone:Read
#    - Zone:Zone Settings:Edit
#    - Zone:Cache Purge (optional)
# 3. Set CLOUDFLARE_API_TOKEN and CLOUDFLARE_ZONE_ID
#
# ============================================
# HOW IT WORKS (FREE PLAN)
# ============================================
#
# 1. BASIC CDN DELIVERY:
#    - Original: https://akeneo.com/media/product.jpg
#    - Via CDN: https://your-domain.com/media/product.jpg
#    - Benefits: Global CDN, caching, compression, HTTP/2
#
# 2. IMAGE VARIANTS (Pro Plan + Image Resizing):
#    - Thumbnail: https://your-domain.com/cdn-cgi/image/width=150,height=150/media/product.jpg  
#    - Medium: https://your-domain.com/cdn-cgi/image/width=500,height=500/media/product.jpg
#    - Large: https://your-domain.com/cdn-cgi/image/width=1200,height=1200/media/product.jpg
#
# 3. AUTOMATIC OPTIMIZATION:
#    - WebP/AVIF format conversion (automatic)
#    - Brotli/Gzip compression
#    - HTTP/2 and HTTP/3 support
#    - Global edge caching
#
# ============================================
# FEATURES BY PLAN
# ============================================
#
# FREE PLAN:
# ✅ Global CDN delivery
# ✅ Basic caching and compression  
# ✅ HTTP/2 support
# ✅ Basic DDoS protection
# ✅ SSL/TLS encryption
# ❌ Image Resizing (requires Pro+)
# ❌ Advanced cache rules
#
# PRO PLAN ($20/month):
# ✅ All Free features
# ✅ Image Resizing and optimization
# ✅ Polish (automatic image optimization)
# ✅ Advanced cache rules
# ✅ Page Rules (3 included)
#
# BUSINESS+ PLANS:
# ✅ All Pro features
# ✅ More Page Rules
# ✅ Custom SSL certificates
# ✅ Advanced security features
#
# ============================================
# COST BREAKDOWN (ESTIMATES)
# ============================================
#
# FREE PLAN:
# - Domain: $0 (if you already own it)
# - Cloudflare: $0
# - Bandwidth: $0 (unlimited)
# - Storage: Uses your existing Akeneo URLs
# - Total: $0/month
#
# PRO PLAN (for image resizing):
# - Domain: $0 (if you already own it)  
# - Cloudflare Pro: $20/month
# - Bandwidth: $0 (unlimited)
# - Image transformations: Included
# - Total: $20/month
#
# ============================================
# PERFORMANCE BENEFITS
# ============================================
#
# Expected improvements with Cloudflare CDN:
# - 40-60% faster image loading worldwide
# - Reduced server bandwidth usage
# - Better Core Web Vitals scores
# - Automatic format optimization (WebP/AVIF)
# - Built-in DDoS protection
# - 99.9%+ uptime SLA

# ============================================
# TROUBLESHOOTING
# ============================================
#
# Common issues and solutions:
#
# 1. Images not loading through CDN:
#    - Check DNS is pointing to Cloudflare
#    - Verify CLOUDFLARE_CDN_DOMAIN is correct
#    - Check Cloudflare SSL/TLS mode (should be "Full" or "Full (strict)")
#
# 2. OAuth connection fails:
#    - Verify redirect URI matches exactly
#    - Check client ID and secret are correct
#    - Ensure your app has proper permissions
#
# 3. Image resizing not working:
#    - Image Resizing requires Pro plan or higher
#    - Feature must be enabled in Cloudflare dashboard
#    - Check zone has Image Resizing enabled
#
# 4. Cache not updating:
#    - Use cache purge API (requires API token or OAuth)
#    - Check cache rules in Cloudflare dashboard
#    - Verify TTL settings
#
# For support, check: https://developers.cloudflare.com/