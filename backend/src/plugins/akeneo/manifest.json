{
  "name": "Akeneo PIM Integration",
  "version": "1.2.0",
  "description": "Complete integration with Akeneo PIM for product, category, and attribute synchronization",
  "author": "Catalyst Team",
  "category": "integration",
  "type": "pim",
  "dependencies": {
    "axios": "^1.0.0",
    "uuid": "^9.0.0"
  },
  "permissions": [
    "database:read",
    "database:write",
    "network:external",
    "files:read",
    "files:write"
  ],
  "hooks": [
    "product:beforeSave",
    "product:afterSave",
    "category:beforeSave",
    "category:afterSave"
  ],
  "config": {
    "baseUrl": {
      "type": "url",
      "label": "Akeneo Base URL",
      "description": "Your Akeneo PIM base URL (e.g., https://your-pim.akeneo.cloud)",
      "required": true,
      "validation": "url"
    },
    "clientId": {
      "type": "text",
      "label": "Client ID",
      "description": "OAuth2 Client ID from Akeneo",
      "required": true,
      "encrypted": true
    },
    "clientSecret": {
      "type": "password",
      "label": "Client Secret",
      "description": "OAuth2 Client Secret from Akeneo",
      "required": true,
      "encrypted": true
    },
    "username": {
      "type": "text",
      "label": "Username",
      "description": "Akeneo username for API access",
      "required": true
    },
    "password": {
      "type": "password",
      "label": "Password",
      "description": "Akeneo user password",
      "required": true,
      "encrypted": true
    },
    "syncCategories": {
      "type": "boolean",
      "label": "Sync Categories",
      "description": "Enable automatic category synchronization",
      "default": true
    },
    "syncProducts": {
      "type": "boolean",
      "label": "Sync Products",
      "description": "Enable automatic product synchronization",
      "default": true
    },
    "syncAttributes": {
      "type": "boolean",
      "label": "Sync Attributes",
      "description": "Enable automatic attribute synchronization",
      "default": true
    },
    "preventUrlKeyOverride": {
      "type": "boolean",
      "label": "Prevent URL Key Override",
      "description": "Prevent overriding existing URL keys during sync",
      "default": true
    },
    "akeneoUrlField": {
      "type": "text",
      "label": "Akeneo URL Field Name",
      "description": "Field name in Akeneo to use for URL generation",
      "default": "url_key",
      "conditional": {
        "field": "preventUrlKeyOverride",
        "value": false
      }
    },
    "dryRun": {
      "type": "boolean",
      "label": "Dry Run Mode",
      "description": "Run sync without making changes (for testing)",
      "default": false
    },
    "batchSize": {
      "type": "number",
      "label": "Batch Size",
      "description": "Number of items to process in each batch",
      "default": 100,
      "min": 1,
      "max": 1000
    },
    "locale": {
      "type": "select",
      "label": "Default Locale",
      "description": "Default locale for content extraction",
      "default": "en_US",
      "options": [
        {"value": "en_US", "label": "English (US)"},
        {"value": "en_GB", "label": "English (UK)"},
        {"value": "fr_FR", "label": "French"},
        {"value": "de_DE", "label": "German"},
        {"value": "es_ES", "label": "Spanish"},
        {"value": "it_IT", "label": "Italian"}
      ]
    }
  },
  "methods": [
    "syncProducts",
    "syncCategories", 
    "syncAttributes",
    "testConnection",
    "getProductCount",
    "getCategoryCount",
    "getAttributeCount",
    "scheduleSync",
    "cancelSync",
    "getSyncStatus"
  ],
  "routes": [
    {
      "method": "POST",
      "path": "/sync/products",
      "handler": "syncProducts",
      "description": "Sync products from Akeneo"
    },
    {
      "method": "POST", 
      "path": "/sync/categories",
      "handler": "syncCategories",
      "description": "Sync categories from Akeneo"
    },
    {
      "method": "POST",
      "path": "/sync/attributes", 
      "handler": "syncAttributes",
      "description": "Sync attributes from Akeneo"
    },
    {
      "method": "POST",
      "path": "/test-connection",
      "handler": "testConnection",
      "description": "Test connection to Akeneo PIM"
    },
    {
      "method": "GET",
      "path": "/status",
      "handler": "getSyncStatus",
      "description": "Get current sync status"
    }
  ],
  "database": {
    "tables": [
      "akeneo_mappings",
      "akeneo_schedules"
    ],
    "migrations": [
      "001-create-akeneo-mappings.sql",
      "002-create-akeneo-schedules.sql"
    ]
  },
  "cron": [
    {
      "name": "daily-product-sync",
      "schedule": "0 2 * * *",
      "handler": "syncProducts",
      "description": "Daily product synchronization at 2 AM"
    },
    {
      "name": "weekly-category-sync",
      "schedule": "0 3 * * 0",
      "handler": "syncCategories",
      "description": "Weekly category synchronization on Sunday at 3 AM"
    }
  ],
  "adminNavigation": {
    "enabled": true,
    "label": "Akeneo PIM",
    "icon": "Database",
    "route": "/admin/akeneo",
    "order": 80,
    "parentKey": "products",
    "description": "Product Information Management integration"
  }
}